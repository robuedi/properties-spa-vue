import{d as B,r as $,u as b,a as n,o as m,b as x,w as r,e as g,f as l,g as a,t as S,h as k,c as I,i as T,j}from"./index-102d67b4.js";import{F as q,c as v,u as D}from"./formValidator-99071270.js";import{u as M}from"./apiFormErrParser-907ea7ab.js";class U extends q{constructor(u){super({email:v().email().required(),password:v().required()},u)}}const A={key:0,class:"text-center mt-2"},z=T("strong",null,"Register",-1),G=B({__name:"LoginForm",props:{hideRegisterLink:{type:Boolean,default:!1}},emits:["loggedIn"],setup(c,{emit:u}){const{hideRegisterLink:p}=c,s=$({email:null,password:null});let{errors:t,doValidate:_}=D(U);const y=b(),{formErrParse:F}=M(),L=()=>{y.login(s.value).then(()=>{u("loggedIn",!0)}).catch(i=>{var e,d;t.value=F((d=(e=i==null?void 0:i.response)==null?void 0:e.data)==null?void 0:d.error)})};return(i,e)=>{const d=n("TextInput"),C=n("PasswordInput"),h=n("InlineMessage"),P=n("BasicForm"),E=n("Button"),N=n("router-link"),R=n("Card");return m(),x(R,null,{title:r(()=>[g(" Sign in ")]),content:r(()=>[l(P,null,{default:r(()=>{var f,w,V;return[l(d,{name:"Email",modelValue:s.value.email,"onUpdate:modelValue":e[0]||(e[0]=o=>s.value.email=o),error:(f=a(t))==null?void 0:f.email,onBlur:e[1]||(e[1]=o=>a(_)("email",o))},null,8,["modelValue","error"]),l(C,{name:"Password",modelValue:s.value.password,"onUpdate:modelValue":e[2]||(e[2]=o=>s.value.password=o),error:(w=a(t))==null?void 0:w.password,onBlur:e[3]||(e[3]=o=>a(_)("password",o))},null,8,["modelValue","error"]),(V=a(t))!=null&&V.general?(m(),x(h,{key:0,severity:"warn"},{default:r(()=>{var o;return[g(S((o=a(t))==null?void 0:o.general),1)]}),_:1})):k("",!0)]}),_:1})]),footer:r(()=>[l(E,{icon:"pi pi-user",onClick:L,class:"w-full",label:"Login"}),p?k("",!0):(m(),I("p",A,[g(" Don't have an account yet? "),l(N,{class:"text-dark text-weight-bold",style:{"text-decoration":"none"},to:{name:"register"}},{default:r(()=>[z]),_:1})]))]),_:1})}}}),H={class:"grow flex justify-center items-center"},Q=B({__name:"Login",setup(c){const u=j(),p=()=>{u.push({name:"user"})};return(s,t)=>(m(),I("div",H,[l(G,{onLoggedIn:t[0]||(t[0]=_=>p())})]))}});export{Q as default};
